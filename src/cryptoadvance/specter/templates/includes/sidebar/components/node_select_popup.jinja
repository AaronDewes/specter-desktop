<div class="p-4 w-96 hidden" id="node_select_popup">
    <h1 class="mb-2">{{ _("Node Configuration") }}</h1>
    {% for node_name in specter.node_manager.nodes_names %}
        {% set node = specter.node_manager.get_by_name(node_name) %}
        <form class="my-3" action="{{url_for('nodes_endpoint.switch_node')}}" id="{{node.alias}}-select-node-form" method="POST">
            <input type="hidden" class="csrf-token" name="csrf_token" value="{{ csrf_token() }}"/>
            <input type="hidden" name="node_alias" value="{{ node.alias }}"/>
            <div class="cursor-pointer flex text-white items-center space-x-2 {% if node.alias == specter.node.alias %}active{% endif %}" onclick="document.getElementById('{{node.alias}}-select-node-form').submit();">
                <div class="w-10 flex justify-center">
                    {% include node.node_logo_template() %}
                </div>
                <div>
                    <div class="leading-0 h-6 text-lg">{{ node.name }}</div>
                    <small class="leading-0">
                        {% if node.chain %}
                            {{node.chain | title}}, {{ node.host }}:{{ node.port }}
                        {% else %}
                            {{ _("Node unreachable...") }}
                        {% endif %}
                    </small>
                </div>
                <a class="flex self-center justify-end grow" href="{{ url_for('nodes_endpoint.node_settings', node_alias=node.alias) }}">
                    <img src="{{ url_for('static', filename='img/gear.svg')}}" class="svg-white"/>
                </a>
            </div>
        </form>
    {% endfor %}
    {{ sidebar_btn(url_for('setup_endpoint.node_type'), 'Connect a new node', 'btn_new_node') }}
</div>

<script type="text/javascript">
    function showNodeSelectPopup(e) {
        if (!e) var e = window.event;
        e.cancelBubble = true;
        if (e.stopPropagation) { 
            e.stopPropagation(); 
            e.preventDefault();
        }
        // hidePageOverlay();
        document.getElementById('page_overlay_popup').style.padding = '1.5em 0';
        document.getElementById('page_overlay_popup_cancel_button').classList.add('hidden');
        document.getElementById('side-content').classList.remove('active');
        showPageOverlay('node_select_popup');
    }

    function onCancelOverlay() {
        document.getElementById('page_overlay_popup').style.padding = '1.5em';
        document.getElementById('page_overlay_popup_cancel_button').classList.remove('hidden');

    }
</script>
